{% extends '@__main__/layout.twig' %}

{% block meta %}
    <meta property="og:title" content="{{ set.title }}" />
    <meta property="og:url" content="{{ current_url() }}" />
    <meta property="og:image:width" content="{{ set.thumbnail.width_c }}" />
    <meta property="og:image:height" content="{{ set.thumbnail.height_c }}" />
    <meta property="og:image" content="{{ set.thumbnail.url_c }}" />
    <link rel="image_src" href="{{ set.thumbnail.url_c }}" />
{% endblock %}

{% block styles %}
    <link rel="stylesheet" type="text/css" href="{{ base_url }}/ui/lib/justifiedGallery.min/justifiedGallery.min.css" media="screen" />
{% endblock %}


{% block contents %}
    <header style="background-image:linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),url({{ set.thumbnail.url_c }})">
        <h1 class="text-center">{{ set.title }}</h1>
        {% if set.description is defined %}
            <h5 class="text-center">{{ set.description }}</h5>
        {% endif %}
    </header>
    <section>
        <div class="thumbs">
            {% for photo in set.photo %}
                <a data-id="{{ photo.id }}" class="viewbox" href="{{ url_for('album', { 'album': set.id, 'photo': photo.id }) }}">
                    <img class="lazy"
                         data-original="{{ photo.url_z }}"
                         data-vb-src="{{ photo.url_vb }}"
                         data-vb-w="{{ photo.width_vb }}"
                         data-vb-h="{{ photo.height_vb }}"
                         data-img-link="{{ url_for('photo', { 'album': set.id, 'photo': photo.id }) }}"
                         data-img-download="{{ url_for('photo_download', { 'album': set.id, 'photo': photo.id }) }}"
                         width="{{ photo.th_w }}"
                         height="{{ photo.th_h }}"
                         alt="{{ photo.title }}"
                         src="https://via.assets.so/img.jpg?w={{ photo.th_w }}&h={{ photo.th_h}}&bg=#111111"
                    />
                    <div class="caption hidden">
                        {{ photo.title }}
                    </div>
                </a>
            {% endfor %}
        </div>
    </section>
    <!-- viewbox -->
    <div id="viewbox">
        <div class="img-container">
            <div></div>
        </div>
        <div class="tools row">
            <div class="col-xs-4 title">
                <a href="#" class="" title="Otseviide">
                    <i class="glyphicon glyphicon-picture"></i>
                    <span></span>
                </a>
            </div>
            <div class="col-xs-4 text-center">
                <a href="#" class="prev" title="Eelmine">
                    <i class="glyphicon glyphicon-chevron-left"></i>
                </a>
                <a href="#" class="vb-close counter" title="Välju (ESC)"></a>
                <a href="#" class="next" title="Järgmine">
                    <i class="glyphicon glyphicon-chevron-right"></i>
                </a>
            </div>
            <div class="col-xs-4 text-right">
                <a href="#" class="download" title="Lae alla">
                    <i class="glyphicon glyphicon-save"></i>
                </a>
                <a href="#" class="vb-close" title="Välju (ESC)">
                    <i class="glyphicon glyphicon-remove"></i>
                </a>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ base_url }}/ui/lib/jquery/touchswipe.js"></script>
    <script src="{{ base_url }}/ui/lib/jquery/jquery.lazyload.min.js" type="text/javascript"></script>
    <script src="{{ base_url }}/ui/lib/justifiedGallery.min/jquery.justifiedGallery.min.js" type="text/javascript"></script>
    <script src="{{ base_url }}/ui/js/set.js" type="text/javascript"></script>
{% endblock %}
